# Fetch data Progressivly
- In previous we fetch data from one api end point for a single page.
- But What if we need to fetch data from multiple api end point for a single page.

## Problem Statement : 
- Suppose I need to render a single post along with its comments. So we need to fetch from 2 api end points.

### General approach : 
```.tsx
export default async function Post({ params }: { params: Promise<{ pId: string }> }){
  const { pId } = (await params);
  const post = await getPost(parseInt(pId));
  const comment = await getComment(parseInt(pId));

  return(
    <>
      // render post
      //render comment for that post
    </>
  )
}
```
- Here this will work.
- But the problem is We are fetching data one by one.
- After all post resolve then , for comment , request will be generated.This might be slow.
- Solution is to do it parallelly.
  -----

### So now we are initiating 2 request parallelly at the same time:
```
export default async function Post({ params }: { params: Promise<{ pId: string }> }){
  const { pId } = (await params);
  // no await here
  const postPromise = getPost(parseInt(pId)); 
  const commentPromise = getComment(parseInt(pId));

  // we get 2 promises. now need to resolve them

  const [post,comment] = await Promise.all([postPromise,commentPromise])

}
```
- Now both request initiated parallelly.
- But still not progressive.
- Here we are resolving both promise.
- So When both promise resolves , then our UI will be rendered.
- But what if post resolves earlier then comment.Then UI will not be rendered until comment resolved.
- But we can render the post when it comes, and when comments come we can render them.
- So by doing this, we dont need to wait for one another. No dependencies.
  ------
### Progressivly Rendering : 
```
export default async function Post({ params }: { params: Promise<{ pId: string }> }){
  const { pId } = (await params);
  // no await here
  const postPromise = getPost(parseInt(pId)); 
  const commentPromise = getComment(parseInt(pId));

  //resolve only postPromsie here

  const post = await postPromise;

  return (
    // render the post
    <Suspense fallback="<h1> loading...... </h1>"
      <Comment commentPromise={commentPromsie} />
    <Suspense />
)

```
- Resolve the `comment promise` in Another component
```
export default async function Comment({ commentPromsie }){
  const commnet = await commentPromsie;
  return (
    //render comment in ui
)

```
- So now we wrap the Comment in React suspense.
- Here both request will initiates at the same time.
- No one wait for each other.
- When `post` resolves, it renders.
- When `comment` resolvesw , it renders.

 
